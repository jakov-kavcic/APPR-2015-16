---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Jakov Kavčič"
output: 
  html_document: 
    toc: yes
---

```{r setup, echo=FALSE, results='hide', message=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

Če vprašaš povprečnega študenta: "Zakaj študiraš?", bo najverjetneje odgovoril, da bi rad boljšo plačo in boljše priložnosti za svoje otroke. Zaradi tega sem se odločil raziskati možno povezavo med ravnijo izobrazbe v državi in povprečnim razpoložljivim dohodkom na ravni držav Evropske Unije. Med analizo podatkov se bom osredotočil na določene države, ki bojo predstavljala odstopanja od povprečja in tudi ekstreme v rezultatih. V primeru, nepričakovanih rezultatov bom iskau razloge tudi na drugih področjih, ki bi lahko vplivala na izobrazbo ali povprečni razpoložljivi dohodek.
viri katerih sem se do sedaj posluževau so prišli z naslednjih povezav:
 - [Procent populacije z določeno izobrazbo] (http://appsso.eurostat.ec.europa.eu/nui/show.do?query=BOOKMARK_DS-053408_QID_6B4112F1_UID_-3F171EB0&layout=TIME,C,X,0;GEO,L,Y,0;HHTYP,L,Z,0;INDIC_IL,L,Z,1;UNIT,L,Z,2;INDICATORS,C,Z,3;&zSelection=DS-053408INDIC_IL,MED_E;DS-053408HHTYP,TOTAL;DS-053408INDICATORS,OBS_FLAG;DS-053408UNIT,EUR;&rankName1=HHTYP_1_2_-1_2&rankName2=TIME_1_0_0_0&rankName3=INDIC-IL_1_2_-1_2&rankName4=UNIT_1_2_-1_2&rankName5=GEO_1_2_0_1&rankName6=INDICATORS_1_2_-1_2&sortC=ASC_-1_FIRST&rStp=&cStp=&rDCh=&cDCh=&rDM=true&cDM=true&footnes=false&empty=false&wai=false&time_mode=NONE&time_most_recent=false&lang=EN&cfo=%23%23%23%2C%23%23%23.%23%23%23)
  - [Povprečni razpoložljivi dohodek na prebivalca]  (http://appsso.eurostat.ec.europa.eu/nui/show.do?query=BOOKMARK_DS-591613_QID_-3FAA6024_UID_-3F171EB0&layout=TIME,C,X,0;GEO,L,Y,0;SEX,L,Z,0;AGE,L,Z,1;UNIT,L,Z,2;ISCED11,L,Z,3;INDICATORS,C,Z,4;&zSelection=DS-591613SEX,T;DS-591613UNIT,PC;DS-591613INDICATORS,OBS_FLAG;DS-591613ISCED11,ED0-2;DS-591613AGE,Y15-64;&rankName1=TIME_1_0_0_0&rankName2=ISCED11_1_2_-1_2&rankName3=UNIT_1_2_-1_2&rankName4=GEO_1_2_0_1&rankName5=AGE_1_2_-1_2&rankName6=INDICATORS_1_2_-1_2&rankName7=SEX_1_2_-1_2&sortC=ASC_-1_FIRST&rStp=&cStp=&rDCh=&cDCh=&rDM=true&cDM=true&footnes=false&empty=false&wai=false&time_mode=NONE&time_most_recent=false&lang=EN&cfo=%23%23%23%2C%23%23%23.%23%23%23)

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

Podatki, ki sem izbral sem omejil na države Evropske unije. Pri tem sem tudi izpustil agregatne vrednosti za celotno evropsko unijo. Te bom v primeru, da bi izboljšale vizualizacijo podatkov pozneje definiral po istem postopku.

Tabele, ki sem jih obdeloval imajo za parametre Države in koledarska leta.
Za spremenljivko pa imam v eni tabeli povprečni razpoložljivi prihodek na prebivalca in v drugi pa procent populacije z določeno ravnijo izobrazbe. Ravni izobrazbe so razdeljene na:
 - 0 do 2
 - 3 in 4
 - 5 do 8
Manjkajoči podatki so v izvirni datoteki bili označeni z ":" in sem to spremenil v "NA".

```{r razpredelnice}
kable(head(druzine))
head(obcine)
```

Slika \ref{fig:histogram} prikazuje porazdelitev števila naselij v občinah.

```{r histogram, echo=FALSE, fig.align='center', fig.cap='Histogram števila naselij v občinah'}
hist(obcine[,4], main = "Pogostost števila naselij",
     xlab = "Število naselij", ylab = "Število občin")
```

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE}
source("vizualizacija/vizualizacija.r", encoding = "UTF-8")
```

Slika \ref{fig:zemljevid} prikazuje povprečno velikost družine za vsako občino.

```{r zemljevid, echo=FALSE, fig.align='center', fig.cap='Zemljevid povprečnega števila otrok v družini'}
n <- 100
barve <- topo.colors(n)[1+(n-1)*(druzine$povprecje-min.povprecje)/(max.povprecje-min.povprecje)]
plot(zemljevid, col = barve)
title("Povprečno število otrok v družini")
```

***

# Napredna analiza podatkov

```{r analiza, echo=FALSE}
source("analiza/analiza.r", encoding = "UTF-8")
```

Slika \ref{fig:graf} prikazuje povezavo med številom naselij in površino občine.

```{r graf, echo=FALSE, fig.align='center', fig.cap='Povezava med številom naselij in površino občine'}
plot(obcine[[1]], obcine[[4]],
     main = "Število naselij glede na površino občine",
     xlab = expression("Površina (km"^2 * ")"),
     ylab = "Št. naselij",
     col = barve[obcine[[7]]],
     pch = 18)
legend("topright", legend = names(barve), col = barve,
       pch = 18, cex = 0.5, bg = "white")
```

***